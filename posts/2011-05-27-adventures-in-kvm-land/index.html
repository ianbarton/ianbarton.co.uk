<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Adventures In Kvm Land | Ian's Blog.</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://ianbarton.co.uk/posts/2011-05-27-adventures-in-kvm-land/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Ian Barton.">
<link rel="prev" href="../2011-05-03-new-thermos-flasks/" title="New Thermos Flasks" type="text/html">
<link rel="next" href="../2011-08-07-inov8-roclite-295/" title="Inov8 Roclite 295" type="text/html">
<meta property="og:site_name" content="Ian's Blog.">
<meta property="og:title" content="Adventures In Kvm Land">
<meta property="og:url" content="https://ianbarton.co.uk/posts/2011-05-27-adventures-in-kvm-land/">
<meta property="og:description" content="For a couple of years I have been using Xen on my file server to run
various Linux virtual computers. Initially I started by running it on
Ubuntu, but when Ubuntu dropped support for Xen kernels, I mo">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2011-05-27T17:52:05Z">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="https://ianbarton.co.uk/">

            <span id="blog-title">Ian's Blog.</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="index.org" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100"></ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
            <div class="row">
<div class="col-md-8 blog-main">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Adventures In Kvm Land</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Ian Barton.
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2011-05-27T17:52:05Z" itemprop="datePublished" title="2011-05-27 17:52">2011-05-27 17:52</time></a>
            </p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>
For a couple of years I have been using <a href="http://wiki.debian.org/Xen">Xen</a> on my file server to run
various Linux virtual computers. Initially I started by running it on
Ubuntu, but when Ubuntu dropped support for Xen kernels, I moved to
Debian Lenny and then Debian Squeeze.
</p>

<p>
Recently I bought a couple of HP Proliant <a href="http://h10010.www1.hp.com/wwpc/us/en/sm/WF05a/15351-15351-4237916-4237918-4237917-4248009.html">Microservers</a> . One of these
was to replace my current server and the other to use as a firewall
and run a couple of VM's. Transferring my main Xen server to the new
box was easy. However, have been having problems setting up my
firewall box.
</p>

<p>
My firewall box has two wthernet cards. One connected to my internal
network and the other connected to an ADSL modem. Installing Squeeze
and Xen worked fine, up to the point when I tried to configure
pppoe. The configuration went OK, but when I rebooted Xen complained
about eth1 (my internal interface) being busy or unavailable. The Xen
wiki suggests removing all non essential ipv4 settings from your
/etc/network/interfaces. However, mine was already pretty bare and
basically identical to that on my other Microserver, which was working
fine.
</p>

<p>
After re-installs I established that booting with the standard debian
kernel worked fine. Both eth1 and my ADSL interface were initialized
correctly. However, rebooting into the Xen kernel gave the same
problem with errors about eth1 being busy or unavailable. he thing
that caused the errors was configuring the pppoe interface. if I left
it unconfigured everything worked correctly. Finally I decided that
for whatever reason I wasn't going to be able to get Xen to work in
this configuration.
</p>

<p>
I have never tried the virtualization already built into the Linux
kernel (KVM), but decided to experiment to see how it worked for my
requirements. Initially I tried installing Lucid, but ran into a
problem where the installer couldn't install grub2 on my RAID1 boot
disks. Rather fed up with problems by now I went with the latest Natty
server, which installed without a problem.
</p>

<p>
There are several good documents about setting up KVM in Ubuntu:
</p>

<ul class="org-ul">
<li><a href="http://www.howtoforge.com/virtualization-with-kvm-on-ubuntu-10.10">HowToForge</a></li>
<li>Ubuntu <a href="https://help.ubuntu.com/8.04/serverguide/C/ubuntu-vm-builder.html">vm-builder</a>
</li>
<li>KVM <a href="https://help.ubuntu.com/community/KVM/Networking#Network%20Bridge%20Does%20Not%20Appear%20in%20Virt-Manager">networking</a>
</li>
<li>General Ubuntu <a href="https://help.ubuntu.com/community/KVM">KVM</a> documentation</li>
<li>
<a href="https://help.ubuntu.com/community/KVM/Installation">Installing</a> KVM on Ubuntu</li>
</ul>
<p>
After correcting an initial configuration error, I soon had bridged
networking and a test VM with Ubuntu Lucid up and running.
</p>

<p>
Having successfully set up KVM, I think that I shall probably migrate
my Debain Xen server to Ubuntu using KVM. Although Xen is working fine
on that server, I don't really want to have to maintain two different
network virtualization technologies.
</p>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../2011-05-03-new-thermos-flasks/" rel="prev" title="New Thermos Flasks">Previous post</a>
            </li>
            <li class="next">
                <a href="../2011-08-07-inov8-roclite-295/" rel="next" title="Inov8 Roclite 295">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content-->
</div>
<aside class="col-md-4 blog-sidebar"><div class="sidebar-module sidebar-module-inset">
<h4>Search </h4>
<!-- Google custom search -->
<form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="%s">
</form>
<!-- End of custom search -->


  <h4><a href="../../pages/about/index.html">About.</a></h4>

</div>
<div class="sidebar-module">


  <h4>Links</h4>
  <ol class="list-unstyled">
<li><a href="../../categories/index.html">Tags</a></li>
    <li><a href="../../archive.html">Archive</a></li>
    <li><a href="http://getbootstrap.com/examples/blog/">Bootstrap Blog Theme</a></li>
    <li><a href="https://getnikola.com/">Nikola</a></li>
  </ol>
</div>
</aside>
</div>

        <footer id="footer">
            Contents Â© 2020         <a href="mailto:ian@ianbarton.co.uk">Ian Barton.</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
